# Руководство по условной логике в формах

## Обзор

Условная логика позволяет показывать или скрывать поля формы в зависимости от значений других полей. Это создает динамические формы, которые адаптируются к ответам пользователя.

## Как настроить условную логику

### 1. В редакторе формы

1. Выберите поле, для которого хотите настроить условную логику
2. В панели свойств справа откройте секцию "Logic"
3. Включите переключатель "Enable Conditional Logic"
4. Настройте параметры:

### 2. Параметры условной логики

#### Action (Действие)
- **Show this field** - показать поле, когда условие выполнено
- **Hide this field** - скрыть поле, когда условие выполнено

#### Depends On Field (Зависит от поля)
Выберите поле, значение которого будет контролировать видимость текущего поля.

#### Condition (Условие)
- **Equals** - точное совпадение значения
- **Not equals** - значение не равно указанному
- **Contains** - значение содержит указанный текст
- **Does not contain** - значение не содержит указанный текст
- **Greater than** - значение больше указанного (для чисел)
- **Less than** - значение меньше указанного (для чисел)
- **Is empty** - поле пустое
- **Is not empty** - поле не пустое

#### Value (Значение)
Значение для сравнения. Для полей с опциями (select, radio, checkbox) будет показан выпадающий список с доступными вариантами.

## Примеры использования

### Пример 1: Показать поле в зависимости от выбора

**Сценарий**: Показать поле "Student ID" только если пользователь выбрал "Student" в поле "Role".

**Настройка**:
- Поле: Student ID
- Action: Show this field
- Depends On: Role
- Condition: Equals
- Value: Student

### Пример 2: Скрыть поле при определенном условии

**Сценарий**: Скрыть поле "Company" если пользователь выбрал "Unemployed" в поле "Employment Status".

**Настройка**:
- Поле: Company
- Action: Hide this field
- Depends On: Employment Status
- Condition: Equals
- Value: Unemployed

### Пример 3: Показать поле при непустом значении

**Сценарий**: Показать поле "Additional Comments" только если пользователь что-то ввел в поле "Feedback".

**Настройка**:
- Поле: Additional Comments
- Action: Show this field
- Depends On: Feedback
- Condition: Is not empty

## Тестовая форма

Для тестирования функциональности создана демонстрационная форма с ID: `9e976e7a-ab51-4faf-b2e4-fb8b7718f9ea`

Доступ к форме: `http://localhost:3000/forms/9e976e7a-ab51-4faf-b2e4-fb8b7718f9ea`

### Структура тестовой формы:

1. **What is your role?** (Select)
   - Student
   - Teacher  
   - Administrator

2. **Student ID** (Text) - показывается только при выборе "Student"

3. **Department** (Text) - показывается только при выборе "Teacher"

4. **Years of Experience** (Number) - показывается только при выборе "Administrator"

5. **Do you need additional support?** (Radio)
   - Yes
   - No

6. **Describe the support you need** (Textarea) - показывается только при выборе "Yes"

7. **Your Name** (Text) - всегда видимо

## Технические детали

### Структура данных в базе

Условная логика хранится в поле `conditional_logic` таблицы `form_fields` в формате JSONB:

```json
{
  "enabled": true,
  "action": "show",
  "depends_on": "field-id-uuid",
  "condition": "equals",
  "value": "student"
}
```

### Поддерживаемые типы полей

Условная логика работает со всеми типами полей:
- text, email, url, tel
- number
- textarea
- select
- radio
- checkbox
- switch
- date, time
- file

### Логика обработки

1. При загрузке формы поля с условной логикой скрыты по умолчанию
2. При изменении значений полей проверяются все условия
3. Поля показываются/скрываются с анимацией
4. Скрытые поля не участвуют в валидации и не отправляются на сервер

## Ограничения

1. Поле не может зависеть от самого себя
2. Циклические зависимости не поддерживаются
3. Одно поле может зависеть только от одного другого поля
4. Условная логика применяется только на стороне клиента

## Будущие улучшения

- Поддержка множественных условий (AND/OR)
- Зависимость от нескольких полей
- Условная логика для валидации
- Условные вычисления значений 